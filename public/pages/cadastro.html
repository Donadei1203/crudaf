<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netfrixo - Cadastro</title>
    <link rel="stylesheet" href="../styles/style.css">
</head>
<body>
    <header>
    <div>
        <img src="../img/logo.png" class="logo" alt="" width="150px">
    </div>
    
    <div>
        <a href="../index.html">LOGIN</a>
    </div>
    </header>
    <main>


<div class="cadastro">
<h1>CADASTRO</h1>
<hr>
<form action="">

    <div>
        <div>

            <label for="nome" style="letter-spacing: 3px;">Nome</label>
            <input type="text" id="nome" required maxlength="15">
            <br>
            <label for="senha" style="letter-spacing: 3px;">Senha</label>
            <input type="password" id="senha" required>
            <br>
            <label for="cpf" style="letter-spacing: 3px;">CPF</label>
            <input type="text" id="cpf" maxlength="14" required oninput="formatorg(this)">
            <br>
            <label for="email" style="letter-spacing: 3px;">Email</label>
            <input type="email" id="email" required>
            <br>
        </div>
        <div>
            <label for="cep" style="letter-spacing: 3px;">CEP</label>
            <input type="text" id="cep" required maxlength="8" >
            <br>
            <label for="cidade" style="letter-spacing: 3px;">Cidade</label>
            <input type="text" id="cidade" required readonly>
            <br>
            <label for="estado" style="letter-spacing: 3px;">Estado</label>
            <input type="text" id="estado" required readonly>
            <br>
            <label for="rua" style="letter-spacing: 3px;">Rua</label>
            <input type="text" id="rua" required readonly>
            <br>
            <label for="telefone" style="letter-spacing: 3px;">Telefone</label>
            <input type="text" id="telefone" maxlength="11" required>
            <br>
        </div>
    </div>
    <button type="button" id="entrar" onclick="btocadastrar(event)">Cadastrar</button>
</form>

</div>
</main>
    
</body>
<script>
            //Preencher os inputs com arrow functions
            const preencherFormulario = (endereco) => {
            document.getElementById("rua").value = endereco.logradouro
            document.getElementById("cidade").value = endereco.localidade
            document.getElementById("estado").value = endereco.uf
            document.getElementById("telefone").value = endereco.ddd
            
        }

        //Autopreenchido
        const CepValido = (cep) => {
            if (cep.length == 8) {
                return true;
            } else {
                return false;
            }
        }

        //Buscar API
        const pesquisaCep = async () => {
            const cep = document.getElementById("cep").value;
            const url = `https://viacep.com.br/ws/${cep}/json/`;
            if(CepValido(cep)) {
                const dados = await fetch(url);
                const endereco = await dados.json();
                preencherFormulario(endereco);
            }
        }
        document.getElementById("cep").addEventListener("focusout", pesquisaCep);

        function formatorg(input) {
      input.value = input.value
        .replace(/\D/g, '')                      // Remove tudo que não for dígito
        .replace(/(\d{3})(\d)/, '$1.$2')         // Coloca ponto após os 2 primeiros dígitos
        .replace(/(\d{3})(\d)/, '$1.$2')         // Coloca ponto após os 3 dígitos seguintes
        .replace(/(\d{3})(\d{1,2})$/, '$1-$2');  // Coloca hífen nos dois últimos dígitos
    }

</script>
<script src="../scripts/script.js"></script>
</html>